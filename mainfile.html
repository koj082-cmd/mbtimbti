<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mbti 진로 추천 테스트</title>
    <style>
        /* 투박한 UI 스타일 */
        body {
            font-family: 'Courier New', monospace; /* 모노스페이스 폰트 사용 */
            background-color: #CCCCCC; /* 중간 톤 회색 배경 */
            color: #000000;
            padding: 20px;
            margin: 0;
            text-align: center;
        }

        #app {
            width: 90%;
            max-width: 600px;
            margin: 20px auto;
            border: 5px solid #333333; /* 두꺼운 검정 테두리 */
            background-color: #E0E0E0; /* 밝은 회색 컨테이너 배경 */
            padding: 20px;
        }

        header h1 {
            font-size: 24px;
            color: #0000AA; /* 파란색 제목 */
            margin-bottom: 5px;
            border-bottom: 2px solid #333333;
            padding-bottom: 5px;
        }

        header p {
            font-size: 14px;
            color: #555555;
            margin-bottom: 20px;
        }

        /* 질문 카드 스타일 */
        .question-card {
            background-color: #FFFFFF;
            border: 3px solid #666666;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
            text-align: left;
        }

        /* 버튼 스타일 (투박한 3D 효과) */
        .answer-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            border: 3px outset #999999; /* 3D 효과 */
            background-color: #EEEEEE;
            color: #000000;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: none; /* 전환 효과 제거 */
        }
        .answer-btn:active {
            border: 3px inset #999999; /* 눌릴 때 들어가는 효과 */
            background-color: #DDDDDD;
        }

        /* 진행 상태 바 스타일 */
        .progress-bar-container {
            margin-bottom: 15px;
        }
        .progress-bar {
            height: 15px;
            background-color: #FFFFFF;
            border: 1px solid #333333;
            margin-top: 5px;
        }
        .progress-fill {
            height: 100%;
            background-color: #008800; /* 단순한 녹색 채우기 */
            transition: width 0.5s;
        }
        .progress-text {
             font-size: 14px;
             text-align: left;
             font-weight: bold;
        }

        /* 결과 화면 스타일 */
        .result-box {
            border: 4px dashed #FF0000; /* 점선 테두리 */
            background-color: #FFFFAA; /* 노란색 배경 */
            padding: 20px;
            margin-top: 20px;
        }
        .result-box h2 {
            font-size: 36px;
            color: #CC0000;
            margin-top: 10px;
            margin-bottom: 15px;
        }
        .career-list {
            text-align: left;
            margin-top: 15px;
            border: 2px solid #333333;
            padding: 10px;
            background-color: #FFFFFF;
        }
        .career-list li {
            margin-bottom: 5px;
            list-style-type: square;
        }

        /* Hidden 클래스 */
        .hidden {
            display: none;
        }

    </style>
</head>
<body>

    <div id="app">

        <!-- Header -->
        <header>
            <h1>mbti 진로 추천 테스트</h1>
            <p>나의 성향과 어울리는 진로를 확인해보세요.</p>
        </header>

        <!-- Test Container -->
        <div id="test-container">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <!-- Result Container -->
        <div id="result-container" class="hidden">
            <!-- Results will be dynamically inserted here -->
        </div>

    </div>

    <script>
        // 전역 변수 및 상수 설정
        let currentQuestionIndex = 0;
        let score = { E: 0, S: 0, T: 0, J: 0 };
        let totalQuestions = 0;
        const testContainer = document.getElementById('test-container');
        const resultContainer = document.getElementById('result-container');

        // MBTI 질문 데이터
        // [질문, 키, 동의 시 극성 (1: 키 성향, -1: 반대 성향)]
        const questions = [
            // E/I
            ["주말 계획이 생기면, 주로 사람들과 함께 보내는 활동을 찾습니다.", 'E', 1],
            ["혼자만의 시간을 가지면서 에너지를 재충전하는 편입니다.", 'E', -1],
            ["낯선 사람들과 이야기하는 것에 거부감이 없습니다.", 'E', 1],
            ["말하기 전에 생각을 정리하는 시간이 필요합니다.", 'E', -1],

            // S/N
            ["눈에 보이는 사실과 실제 경험을 가장 중요하게 생각합니다.", 'S', 1],
            ["미래의 가능성과 아이디어를 상상하는 것을 좋아합니다.", 'S', -1],
            ["세부 사항을 꼼꼼히 확인하고 현실적인 해결책을 선호합니다.", 'S', 1],
            ["숲을 먼저 보고 나무는 나중에 보는 경향이 있습니다.", 'S', -1],

            // T/F
            ["결정을 내릴 때 객관적인 사실과 논리를 우선시합니다.", 'T', 1],
            ["타인의 감정과 상황을 고려하여 공감하는 것이 중요합니다.", 'T', -1],
            ["비판적인 의견을 개인적인 공격으로 받아들이지 않습니다.", 'T', 1],
            ["갈등 상황에서 조화와 평화를 유지하려고 노력합니다.", 'T', -1],

            // J/P
            ["해야 할 일은 미리 계획하고 목록을 만드는 편입니다.", 'J', 1],
            ["상황에 따라 유연하게 대처하며 즉흥적인 선택을 즐깁니다.", 'J', -1],
            ["마감 기한을 지키는 것에 큰 중요성을 둡니다.", 'J', 1],
            ["계획이 변경되더라도 스트레스를 덜 받는 편입니다.", 'J', -1]
        ];
        totalQuestions = questions.length;

        // 5지선다 옵션 정의 [옵션 텍스트, 점수 (동의 극성 기준)]
        const answerOptions = [
            { text: '매우 그렇다', scoreMultiplier: 2 },
            { text: '조금 그렇다', scoreMultiplier: 1 },
            { text: '보통이다', scoreMultiplier: 0 },
            { text: '조금 아니다', scoreMultiplier: -1 },
            { text: '매우 아니다', scoreMultiplier: -2 }
        ];

        // MBTI 결과별 설명 및 진로 추천 데이터
        const mbtiResults = {
            'ISTJ': { title: '청렴결백한 논리주의자', desc: '사실을 바탕으로 계획하고 실행하는 현실주의자', careers: ['회계사', '공무원', '경찰', '감사관', '프로세스 관리자'] },
            'ISFJ': { title: '용감한 수호자', desc: '타인을 돕고 헌신하는 따뜻한 마음의 소유자', careers: ['간호사', '초등학교 교사', '사회복지사', '사서', '보육교사'] },
            'INFJ': { title: '선의의 옹호자', desc: '사람들에게 영감을 주는 통찰력 있는 이상주의자', careers: ['심리학자', '작가', '상담사', '인사(HR) 전문가', '예술가'] },
            'INTJ': { title: '용의주도한 전략가', desc: '지식과 비전을 추구하는 지적인 탐험가', careers: ['시스템 분석가', '과학자', '대학교수', '투자 전략가', '연구 개발원'] },
            'ISTP': { title: '만능 재주꾼', desc: '손재주가 좋고 논리적으로 문제 해결을 즐기는 현실주의자', careers: ['엔지니어', '기술자', '파일럿', '스포츠 코치', '정비사'] },
            'ISFP': { title: '호기심 많은 예술가', desc: '온화하고 자유로우며, 현재를 즐기는 예술가', careers: ['디자이너', '예술가', '수의사', '물리 치료사', '자연보호 활동가'] },
            'INFP': { title: '열정적인 중재자', desc: '이상적인 세상을 꿈꾸는 이타적이고 영감을 주는 사람', careers: ['문학가', '음악가', '편집자', '교육 컨설턴트', '언어 치료사'] },
            'INTP': { title: '논리적인 사색가', desc: '끊임없이 지식을 탐구하는 창의적인 학자', careers: ['소프트웨어 개발자', '연구원', '철학자', '데이터 과학자', '수학자'] },
            'ESTP': { title: '모험을 즐기는 사업가', desc: '에너지 넘치고 현실적인 문제를 즉각 해결하는 활동가', careers: ['영업 전문가', '소방관', '응급 구조사', '사업가', '경영 컨설턴트'] },
            'ESFP': { title: '자유로운 연예인', desc: '즉흥적이고 사교적이며 사람들의 관심을 즐기는 사람', careers: ['배우', '이벤트 플래너', '패션 디자이너', '관광 가이드', '강사'] },
            'ENFP': { title: '재기 발랄한 활동가', desc: '창의적이고 열정적이며 영감을 주는 자유로운 영혼', careers: ['광고 기획자', '마케터', '언론인', '홍보 전문가', '심리 상담사'] },
            'ENTP': { title: '뜨거운 논쟁을 즐기는 변론가', desc: '똑똑하고 도전을 즐기며 논리적 토론을 즐기는 사람', careers: ['변호사', '컨설턴트', '기업가', '발명가', '정치인'] },
            'ESTJ': { title: '엄격한 관리자', desc: '체계적이고 현실적이며 질서를 중시하는 리더', careers: ['경영자', '군 장교', '학교 교장', '금융 관리자', '행정가'] },
            'ESFJ': { title: '사교적인 외교관', desc: '배려심 깊고 협력적이며 사람들을 하나로 모으는 사람', careers: ['영업 관리', 'HR 전문가', '초등 교사', '보험 설계사', '공무원'] },
            'ENFJ': { title: '정의로운 사회운동가', desc: '카리스마 넘치며 타인의 성장을 돕는 열정적인 지도자', careers: ['정치인', 'PR 전문가', '코치', '비영리단체 경영', '교육자'] },
            'ENTJ': { title: '대담한 통솔자', desc: '비전을 제시하고 목표를 향해 돌진하는 강력한 리더', careers: ['CEO', '프로젝트 매니저', '투자 은행가', '전략 기획자', '사업 개발'] }
        };

        /**
         * 다음 질문을 렌더링하거나, 모든 질문이 완료되면 결과를 계산하고 표시합니다.
         */
        function nextQuestion() {
            // 모든 질문 완료
            if (currentQuestionIndex >= totalQuestions) {
                calculateResult();
                return;
            }

            // 현재 질문 데이터 가져오기
            const [questionText, key, polarity] = questions[currentQuestionIndex];

            // 진행률 계산
            const progressPercent = Math.round((currentQuestionIndex / totalQuestions) * 100);

            // 답변 옵션 버튼 HTML 생성
            const answerButtonsHTML = answerOptions.map(option => {
                // 최종 적용될 점수: 옵션 점수 * 질문의 극성
                const finalScore = option.scoreMultiplier * polarity;
                return `
                    <button onclick="handleAnswer('${key}', ${finalScore})"
                        class="answer-btn">
                        ${option.text}
                    </button>
                `;
            }).join('');

            // 질문 컴포넌트 HTML 생성
            testContainer.innerHTML = `
                <div class="space-y-6">
                    <!-- Progress Bar -->
                    <div class="progress-bar-container">
                        <div class="progress-text">
                            ${progressPercent}% 완료 (질문 ${currentQuestionIndex + 1} / ${totalQuestions})
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                    </div>

                    <!-- Question Card -->
                    <div class="question-card">
                        ${questionText}
                    </div>

                    <!-- Answer Options (5지선다) -->
                    <div class="answer-options">
                        ${answerButtonsHTML}
                    </div>
                </div>
            `;

            currentQuestionIndex++;
        }

        /**
         * 답변 선택을 처리하고 다음 질문으로 넘어갑니다.
         * @param {string} key - 해당 답변이 영향을 주는 MBTI 차원 (E, S, T, J)
         * @param {number} value - 점수 값 (예: 2, 1, 0, -1, -2)
         */
        function handleAnswer(key, value) {
            // 해당 MBTI 차원 점수에 점수 값 가산
            score[key] += value;
            nextQuestion();
        }

        /**
         * 최종 MBTI 결과를 계산하고 표시합니다.
         */
        function calculateResult() {
            testContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');

            const resultType = [
                score.E >= 0 ? 'E' : 'I', // E/I (E: +, I: -)
                score.S >= 0 ? 'S' : 'N', // S/N (S: +, N: -)
                score.T >= 0 ? 'T' : 'F', // T/F (T: +, F: -)
                score.J >= 0 ? 'J' : 'P'  // J/P (J: +, P: -)
            ].join('');

            const resultData = mbtiResults[resultType] || {
                title: '오류 발생',
                desc: '결과를 찾을 수 없습니다.',
                careers: ['테스트를 다시 진행해주세요.']
            };

            // 결과 화면 HTML 생성
            resultContainer.innerHTML = `
                <div class="result-box">
                    <h2>최종 결과 출력</h2>
                    <p style="font-size: 14px; margin-bottom: 5px;">당신의 MBTI 유형은 다음과 같습니다.</p>
                    <div style="background-color: #DDDDDD; border: 2px solid #000000; padding: 10px; margin-bottom: 15px;">
                        <span style="font-size: 40px; font-weight: bold; color: #0000AA;">${resultType}</span>
                        <p style="font-size: 20px; font-weight: bold; margin-top: 5px;">${resultData.title}</p>
                    </div>

                    <p style="text-align: left; margin-bottom: 10px; border-bottom: 1px solid #000000;">
                        <span style="font-weight: bold;">[유형 설명]</span> ${resultData.desc}
                    </p>

                    <!-- Career Recommendation -->
                    <div class="career-list">
                        <p style="font-size: 16px; font-weight: bold; margin-bottom: 5px; color: #CC0000;">추천 진로 목록 (경고! 이 목록은 단순 참고용입니다.)</p>
                        <ul>
                            ${resultData.careers.map(c => `<li>${c}</li>`).join('')}
                        </ul>
                    </div>

                    <!-- Restart Button -->
                    <button onclick="resetTest()"
                        class="answer-btn" style="margin-top: 20px; background-color: #666666; color: white;">
                        [TEST 재시작]
                    </button>
                </div>
            `;
        }

        /**
         * 테스트를 초기화하고 첫 질문부터 다시 시작합니다.
         */
        function resetTest() {
            currentQuestionIndex = 0;
            score = { E: 0, S: 0, T: 0, J: 0 };
            resultContainer.classList.add('hidden');
            testContainer.classList.remove('hidden');
            nextQuestion();
        }

        // 페이지 로드 시 초기화
        window.onload = function() {
            nextQuestion();
        };
    </script>
</body>
</html>